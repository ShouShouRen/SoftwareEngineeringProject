# ** 需求文件 **

# **一、選課系統需求規格書:設定課程內容與資訊**

**文件版本：** V1.1 
**文件日期：** 2025/12/07 
**專案作者：** 張育鴻, B1243008

## **1\. 系統說明 (System Description)**

### **1.1 系統目的與目標**

本模組提供教師建立課程資訊的功能，使學生能查詢課程內容並決定是否選課。
目標在於讓教師能正確輸入課程名稱、時間、地點、人數限制等資訊，以形成完整的課程資料。

### **1.2 系統範圍**

本系統範圍涵蓋「老師新增課程」相關操作，包括：

* 顯示新增課程的介面與所有可設定欄位
* 接收教師輸入的課程資訊
* 驗證課程基本資料是否完整且格式正確
* 儲存課程資訊至資料庫
* 在新增成功後，顯示課程清單

### **1.3 使用者類型與特徵**

* **教師 (Teacher)**： 主要操作使用者。需要簡潔的介面並希望快速建立課程資訊
* **學生 (Student)**： 間接使用者。學生依賴教師填寫的課程資訊進行選課
* **系統管理員 (Admin)**： 系統維護者。負責處理課程資料庫管理與錯誤回報

## **2\. 初步系統架構 (High-Level System Architecture)**
### **2.1 系統元件概覽**
#### **2.1.1 呈現層 (Presentation Layer)**

* **新增課程頁面：** 提供課程名稱、時間、地點、人數上限、截止日期等欄位表單
* **錯誤訊息提示：** 輸入不完整或格式錯誤時顯示提示
* **操作按鈕：** 包含「儲存」、「取消」、「返回課程列表」

#### **2.1.2 應用／邏輯層 (Application / Logic Layer)**

* **課程資料驗證模組：**
檢查必填欄位、資料格式、人數上限合理性、時間是否衝突等。

* **課程建立模組：**
處理課程的建立流程，與資料層進行存取。

* **錯誤處理模組：**
回傳欄位錯誤訊息（如「必填欄位未填寫」、「課程代碼重複」等）。

#### **2.1.3 資料層 (Data Layer)**

* **課程資料表 (Course Table)：** 儲存課程名稱、時間、人數、地點、簡介、教師資訊等欄位。
* **課程編號生成器 (Course ID Generator)：** 用於建立唯一的課程代碼。
* **資料庫存取 API：** 提供新增課程、查詢課程等操作。

## **3\. 功能需求 (Functional Requirements)**

本章節依故事與任務說明教師新增課程的邏輯。

### **3.1 使用者故事 (User Story)**

**故事標題：** 新增課程

* **身為 (As a)：** 一位老師
* **我希望 (I want to)：** 能新增課程資訊
* **以便 (So that)：** 讓學生能查看課程並進行選課

#### **驗收標準 (Acceptance Criteria)**

* **AC1：** 系統必須提供填寫課程名稱、時間、地點、人數上限、選課截止日等欄位。
* **AC2：** 若欄位未填寫或格式錯誤，系統需阻止提交並顯示明確錯誤訊息。
* **AC3：** 輸入資料正確後，課程必須成功寫入資料庫。
* **AC4：** 新增成功後，教師需能看到更新後的課程清單。
* **AC5：** 課程代碼不得重複，若重複需提示錯誤。

### **3.2 任務功能描述 (Task Descriptions)**
#### **任務 1：輸入學號與密碼登入選課系統 (T1)**

* **功能描述：** 教師從課程管理介面點選「新增課程」，系統顯示新增課程表單。
* **前置條件：** 教師已成功登入。
* **後置條件：** 顯示可輸入課程資料的頁面。
* **負責人：** 張育鴻
* **產出：** 新增課程頁面 UI。

#### **任務 2：身份驗證成功後進入選課頁面 (T2)**

* **功能描述：** 教師填寫課程名稱、上課時間、地點、人數上限、簡介、選課截止日期
* **前置條件：** 新增課程頁面顯示成功。
* **後置條件：** 使用者提交資料給後端。
* **負責人：** 張育鴻
* **產出：** 表單提交功能。

#### **任務 3：系統驗證課程資料 (T3)**

* **功能描述：** 系統檢查欄位是否完整、格式是否正確、課程代碼是否重複、人數是否有效。
* **前置條件：** 表單資料已送出。
* **後置條件：** 驗證成功則進入下一步；失敗則回傳錯誤。
* **負責人：** 系統後端工程師
* **產出：** 資料驗證模組。

#### **任務 4：建立課程 (T4)**

* **功能描述：** 將課程資料儲存至資料庫並產生唯一課程代碼。
* **前置條件：** 驗證已成功。
* **後置條件：** 資料成功寫入 DB；回傳成功訊息。
* **負責人：** 系統後端工程師
* **產出：** 新增課程 API。

#### **任務 5：顯示新增結果 (T5)**

* **功能描述：** 顯示「新增成功」並返回課程清單。
* **前置條件：** 課程已成功建立。
* **後置條件：** 教師可查看更新後的課程列表。
* **負責人：** 張育鴻
* **產出：** 新增成功頁面＋課程列表。

## **4\. 非功能需求 (Non-Functional Requirements)**
### **4.1 資料正確性 (Data Accuracy)**

* 4.1.1 上課時間格式需符合系統標準（例如「週三 3–4 節」）。
* 4.1.2 人數上限需為正整數。
* 4.1.3 截止日期需符合日期格式，且不得早於系統當前日期。

### **4.2 系統效能 (System Performance)**

* 4.2.1 新增課程資料寫入資料庫的時間不應超過 2 秒。
* 4.2.2 在選課高峰期，同時至少支持 500 位教師編輯或建立課程資料。

### **4.3 使用者體驗 (Usability)**

* 4.3.1 表單錯誤訊息需明確，例如：「課程名稱不可為空」。
* 4.3.2 所有欄位旁需標示「必填／選填」。
* 4.3.3 新增成功後應清楚標示課程已建立，避免重複建立。

### **4.4 可維護性 (Maintainability)**

* 4.4.1 課程欄位資料結構需能輕易擴展（例如未來增加課程費用、備註欄位）。
* 4.4.2 程式碼需與資料驗證邏輯分離，便於維護與調整規則。

# **二、選課系統需求規格書：教室自動化排程**

**文件版本：** V1.0
**文件日期：** 2025/12/04
**專案作者：** 凌彣碩, B1243003

## **1\. 系統說明 (System Description)**

### **1.1 系統目的與目標**

本模組旨在解決傳統人工排課耗時且易出錯的問題。透過自動化演算法，系統將協助教師與行政人員快速完成教室分配，確保資源利用最佳化，並減少排課衝突。

### **1.2 系統範圍**

本系統範圍涵蓋「教室自動化排程」相關功能，包括：

* 依據課程人數與時間自動匹配教室。  
* 偵測並防止排課時間與地點衝突。  
* 提供教師檢視與手動調整排課結果的介面。

### **1.3 使用者類型與特徵**

* **教師 (Teacher):** 主要使用者。希望系統能自動處理繁瑣的教室申請，同時保留調整彈性。  
* **系統管理員 (Admin):** 負責維護教室基本資料（如容量、地點）供系統使用。

## **2\. 初步系統架構 (High-Level System Architecture)**

### **2.1 系統元件概覽**

#### **2.1.1 呈現層 (Presentation Layer)**

* **Web 前端介面:** 提供教師使用的「我的課表」儀表板。  
* **互動元件:** 包含排課結果清單、衝突警示彈窗、以及手動更換教室的下拉式選單與確認視窗。  
* **技術支援:** 需相容於 Chrome, Edge, Firefox, Safari 等主流瀏覽器。

#### **2.1.2 應用/邏輯層 (Application/Logic Layer)**

* **排程演算法引擎 (Scheduling Engine):** 核心邏輯元件。負責接收課程需求，遍歷可用教室，並執行衝突檢測 (Collision Detection)。  
* **權限控制模組:** 驗證 Token 以確保只有授權教師能修改自己的課程教室。  
* **業務邏輯:** 處理「檢查容量」、「檢查時間重疊」、「鎖定教室」等規則。

#### **2.1.3 資料層 (Data Layer)**

* **資料庫 (Database):** 儲存課程資訊、教室資訊（ID、容量、地點）、以及排課關聯表。  
* **備份機制:** 執行定期自動備份，支援災難復原。

## **3\. 功能需求 (Functional Requirements)**

本章節詳述系統應具備的功能邏輯與使用者故事。

### **3.1 使用者故事 (User Story)**

**故事標題:** 教室自動化排程

* **身為 (As a):** 一位老師  
* **我希望 (I want to):** 系統能自動為我的課程安排一間合適且不會與其他課程衝突的教室  
* **以便 (So that):** 我可以專注於課程準備，而無需手動協調教室，並確保教室符合課程需求。

#### **驗收標準 (Acceptance Criteria)**

* **AC1:** 系統必須能檢查並避免與其他已排定課程的時間重疊。  
* **AC2:** 系統必須考量教室的容納人數，確保其大於或等於課程的修課人數上限。  
* **AC3:** 系統必須防止同一間教室在同一時間被重複預訂。  
* **AC4:** 教師應該能在系統中清楚看到其課程被安排在哪一間教室。  
* **AC5:** 當系統自動安排的教室不符合特殊需求時，教師應有手動更換教室的選項。

### **3.2 任務功能描述 (Task Descriptions)**

#### **任務 1：實作教室自動排程演算法**

* **功能描述:** 開發後端邏輯，根據課程的**上課時間**與**預計修課人數**，自動從可用教室列表中篩選並指派教室。需有效避免衝突與容量不足。  
* **負責人:** 凌彣碩  
* **產出:** 自動排程 API 功能。

#### **任務 2：顯示已分配的教室與課程時間**

* **功能描述:** 開發一個使用者介面(UI)，讓教師登入後能清楚看到自己所有課程的排程結果，包含課程名稱、上課時間、已分配的教室名稱/編號，以及教室的容量資訊。  
* **負責人:** 凌彣碩  
* **產出:** 「我的課表」頁面。

#### **任務 3：開發手動修改教室排程功能**

* **功能描述:** 提供一個介面，允許教師手動修改由系統分配的教室。教師點擊修改後，系統應顯示出在**同一時段**所有其他**可用的**、且**容量足夠的**教室列表供教師選擇。教師確認更換後，系統需更新排程資料。  
* **負責人:** 凌彣碩  
* **產出:** 更換教室功能視窗。

## **4\. 非功能需求 (Non-Functional Requirements)**

本章節針對「教室自動排程」Story 的特性，定義必要的系統品質與限制。

### **4.1 資料一致性與完整性 (Data Consistency & Integrity)**

針對 Story 需求：「避免與其他課程時間衝突」

* 4.1.1 交易原子性 (Transactional Atomicity)  
  排程系統必須保證資料庫操作的原子性。當多位教師同時嘗試預訂同一間教室時，系統只能允許一筆交易成功，嚴格禁止雙重預訂 (Double Booking) 的情況發生。  
* 4.1.2 即時狀態同步  
  當某一教室被分配或鎖定後，其狀態必須在 1 秒內 同步更新至所有使用者的查詢清單中，避免教師看到已過期的「可用」資訊。

### **4.2 效能與回應時間 (Performance & Response Time)**

針對 Story 需求：「自動安排」、「修改教室」

* 4.2.1 演算法運算效率  
  當教師觸發「自動排程」功能時，系統需在 3 秒內 完成衝突檢測並回傳建議的教室結果，避免使用者長時間等待。  
* 4.2.2 列表載入速度  
  在執行「更換教室」功能時，系統篩選並顯示可用教室列表的時間不得超過 1 秒。

### **4.3 安全性與授權 (Security & Authorization)**

針對 Story 需求：「我的課程」

* 4.3.1 資源存取控制 (Resource Access Control)  
  系統需實作嚴格的權限檢查，確保教師僅能修改自己所授課程的教室安排，無法變更其他教師的排課結果。  
* 4.3.2 操作稽核 (Audit Trail)  
  所有教室分配的變更（包含自動排程與手動修改）均需記錄操作者 ID、時間戳記與變更前後的教室編號，以供日後衝突爭議時查詢。

### **4.4 可用性與使用者體驗 (Usability)**

針對 Story 需求：「確認排課狀況」、「修改教室排程」

* 4.4.1 衝突視覺化  
  若系統無法自動安排教室，必須提供具體的錯誤代碼或訊息（例如：「該時段無足夠容量的教室」），而非僅顯示一般性錯誤。  
* 4.4.2 狀態提示  
  在手動更換教室的介面中，不可用的教室應以視覺方式（如反灰或鎖頭圖示）呈現，並在滑鼠懸停時顯示不可用的原因（如：「已由課程 A 預訂」）。

# **三、專案需求規格說明書：查看學生選課狀況模組 **

**文件版本：** V1.1
**文件日期：** 2025/12/08 
**專案作者：** 張育鴻 B1243008

## 1. 系統說明 (System Description)

### 1.1 系統目的與目標

本模組旨在協助教師有效查看已開課程的學生選課狀況，使教師能即時掌握選課人數是否達開課門檻、了解學生組成，並可下載選課名單以進行課堂準備。此功能可提升教學安排效率並協助教師做出課程規劃與資源調度決策。

### 1.2 系統範圍

本系統範圍涵蓋「查看選課名單與下載名單」相關功能，包括：

* 查詢教師所開課程的選課名單
* 顯示學生基本資訊（姓名、學號、系級）
* 下載選課清單（CSV 或 PDF）
* 系統自動發送「達開課門檻」通知給教師

### 1.3 使用者類型與特徵

* **教師 (Teacher)：** 本模組主要使用者，需要了解課程的選課情況，以便確認是否達到開課門檻並做好上課準備。
* **系統管理員 (Admin)：** 負責維護學生、課程、選課資料的一致性，確保查詢的準確性。

---

## 2. 初步系統架構 (High-Level System Architecture)

### 2.1 系統元件概覽

#### 2.1.1 呈現層 (Presentation Layer)

* **Web 前端介面：** 提供選課名單查詢介面、下載按鈕、課程選擇下拉選單
* **互動元件：** 搜尋欄位、排序功能、資料表格、匯出選項
* **瀏覽器相容性：** Chrome, Edge, Firefox, Safari

#### 2.1.2 應用/邏輯層 (Application/Logic Layer)

* **選課查詢模組 (Enrollment Query Service)：** 負責查詢課程的選課名單與人數統計
* **匯出檔案模組 (Report Generator)：** 提供 CSV / PDF 格式下載
* **通知模組 (Notification Service)：** 當選課人數達開課門檻時，自動發送通知給教師
* **身份驗證 & 授權模組：** 確保教師只能查看自己負責的課程

#### 2.1.3 資料層 (Data Layer)

- **資料庫包含：**
  - 課程資料表（Course）
  - 學生資料表（Student）
  - 選課紀錄表（Enrollment）
  - 教師課程權限表（TeacherCourse）
- **備份機制：** 選課相關資料每日備份

---

## 3. 功能需求 (Functional Requirements)

### 3.1 使用者故事 (User Story)

**故事標題：** 查看學生選課狀況  

* **身為 (As a)：** 一位老師  
* **我希望 (I want to)：** 能查看我所開課程的選課名單  
* **以便 (So that)：** 我能掌握選課情況並進行教學準備  

#### 驗收標準 (Acceptance Criteria)

* **AC1:** 教師能查看其所開課程的學生選課名單  
* **AC2:** 顯示學生姓名、學號、系級等基本資訊  
* **AC3:** 名單可匯出為 CSV 或 PDF  
* **AC4:** 當選課人數達到開課門檻時，系統需自動通知教師  
* **AC5:** 教師不能查看自己未開設課程的選課名單  

---

## 3.2 任務功能描述 (Task Descriptions)

---

### 任務 1：查詢目前選課名單

- **功能描述：**  
  教師登入系統後可選擇任一開設的課程，系統需根據課程 ID 查詢選課紀錄，並以表格方式呈現學生名單。  
  名單需至少包含：
  - 學生姓名  
  - 學號  
  - 系級  
  - 選課時間  

- **負責人：** 張育鴻 
- **產出：** 選課查詢頁面（含列表與搜尋排序功能）

---

### 任務 2：下載學生選課清單（CSV / PDF）

- **功能描述：**  
  教師可點擊「下載名單」按鈕選擇匯出格式（CSV 或 PDF）。  
  - **CSV 格式：** 可供 Excel 或系統分析使用  
  - **PDF 格式：** 適合列印或行政用途  
  檔案命名格式：  
  `選課名單_課程名稱_學期_日期.[csv/pdf]`

- **負責人：** 張育鴻 
- **產出：** 可下載檔案的匯出模組

---

### 任務 3：接收課程達開課門檻通知

- **功能描述：**  
  當某課程的選課人數 **首次達到開課門檻（例：10 人）** 時：
  - 系統自動發送 Email / 系統通知給教師  
  - 通知內容包括：課程名稱、目前選課人數、開課門檻是否已達成  
  - 系統需避免重複通知（僅首次達成時發送）  

- **負責人：** 張育鴻  
- **產出：** 通知模組（含門檻偵測與發送）

---

## 4. 非功能需求 (Non-Functional Requirements)

### 4.1 效能與回應時間

- **4.1.1 查詢速度：** 選課名單查詢需在 **2 秒內**完成  
- **4.1.2 匯出速度：** CSV/PDF 產生應在 **5 秒內**完成  

### 4.2 可用性與使用者體驗

- **4.2.1 介面要求：**  
  名單表格需支援排序（按學號、姓名）與搜尋功能  
- **4.2.2 響應式設計：**  
  支援桌面、手機、平板查看名單  
- **4.2.3 錯誤提示：**  
  未有權查看課程資料時，需顯示「權限不足」

### 4.3 相容性

- 支援 Chrome、Firefox、Edge、Safari  
- 匯出 PDF 必須可被一般 PDF Reader 開啟  

### 4.4 安全性與授權

- **4.4.1 身份驗證：**  
  教師必須登入後才能使用  
- **4.4.2 權限限制：**  
  教師只能查看自己的課程名單  
- **4.4.3 資料保護：**  
  名單中不得顯示學生敏感資料（如個人地址、電話）  

### 4.5 可靠性

- 99% 系統可用性  
- 選課資料每日備份  
- 通知需確保不重複送出  

### 4.6 可維護性

- 模組化設計（查詢、匯出、通知分離）  
- 系統需紀錄查詢與匯出操作日誌  
- 當課程或選課資料格式異動時，需具備擴充彈性  

# **四、選課系統需求規格書：登入系統身分驗證**

**文件版本：** V1.0
**文件日期：** 2025/12/07
**專案作者：** 施穎禾, B1243021

## **1\. 系統說明 (System Description)**

### **1.1 系統目的與目標**

本模組旨在提供一個安全且可靠的機制，允許學生透過其學號與密碼登入選課系統。主要目標是進行身份驗證，以確保選課操作的安全性。

### **1.2 系統範圍**

本系統範圍涵蓋「學生登入」相關功能，包括：

* 接受學號與密碼輸入。
* 執行帳號密碼的正確性驗證。
* 處理登入成功後的授權導向。
* 處理登入失敗時的錯誤訊息提示與安全防護。

### **1.3 使用者類型與特徵**

* **學生 (Student):** 需使用學號與密碼進行登入。期望快速、安全地進入選課系統。
* **系統管理員 (Admin):** 負責維護學生的帳號與密碼資料（間接使用者，體現在安全性需求）。

## **2\. 初步系統架構 (High-Level System Architecture)**

### **2.1 系統元件概覽**

#### **2.1.1 呈現層 (Presentation Layer)**

* **登入介面:** 提供學號與密碼的輸入欄位，以及「登入」按鈕。
* **錯誤訊息顯示:** 能夠清晰且明確地顯示驗證失敗訊息。
* **技術支援:** 需相容於主流瀏覽器。

#### **2.1.2 應用/邏輯層 (Application/Logic Layer)**

* **身份驗證模組 (Authentication Module):** 接收學號與密碼，並與資料層進行比對驗證。
* **授權會話管理 (Session/Token Management):** 驗證成功後，建立有效的授權會話 (session/token) 並維持登入狀態。
* **安全性檢查:** 處理如 SQL 注入防範、連續錯誤登入鎖定等安全邏輯。

#### **2.1.3 資料層 (Data Layer)**

* **資料庫 (Database):** 儲存學生帳號（學號）與加密後的密碼。
* **安全日誌:** 記錄所有登入操作（成功與失敗），供安全稽核使用。

## **3\. 功能需求 (Functional Requirements)**

本章節詳述系統應具備的功能邏輯與使用者故事。

### **3.1 使用者故事 (User Story)**

**故事標題:** 登入系統身分驗證

* **身為 (As a):** 一位學生
* **我希望 (I want to):** 能登入系統進行身份驗證
* **以便 (So that):** 確保選課安全性

#### **驗收標準 (Acceptance Criteria)**

* **AC1:** 系統必須使用學生**學號與密碼**進行登入驗證。
* **AC2:** 驗證成功後，系統必須正確**導入選課頁面**。
* **AC3:** 驗證失敗時，系統必須**顯示明確錯誤訊息**且**不得導入選課頁面**。
* **AC4:** 系統必須在登入成功後，**建立並維持有效的授權會話**（session/token）。
* **AC5:** 系統必須具有**防止惡意攻擊**（如 SQL 注入）及**登入嘗試保護**（如帳號鎖定）的機制。

### **3.2 任務功能描述 (Task Descriptions)**

#### **任務 1：輸入學號與密碼登入選課系統 (T1)**

* **功能描述:** 處理學生在登入頁面輸入學號與密碼，並送出認證請求的流程。需處理前端表單驗證（必填欄位檢查）和後端驗證邏輯。
* **前置條件:** 學生已註冊並擁有學號與密碼；登入頁面可存取。
* **後置條件:** 系統收到登入請求並回應驗證結果。
* **負責人:** 施穎禾
* **產出:** 登入 API 端點功能。

#### **任務 2：身份驗證成功後進入選課頁面 (T2)**

* **功能描述:** 當身份驗證模組回傳成功時，系統將學生導向選課頁面 (`/course-selection`)，並建立授權憑證，確保後續操作的登入狀態與安全性。
* **前置條件:** 驗證服務可用且帳號密碼驗證成功。
* **後置條件:** 學生可在選課頁面進行選課操作，且系統維持登入狀態。
* **負責人:** 施穎禾
* **產出:** 頁面導向與 Session/Token 建立功能。

## **4\. 非功能需求 (Non-Functional Requirements)**

本章節針對「登入系統身分驗證」Story 的特性，定義必要的系統品質與限制。

### **4.1 安全性與授權 (Security & Authorization)**

針對 Story 需求：「確保選課安全性」

* 4.1.1 密碼儲存標準  
    學生的密碼在資料庫中必須以不可逆的加密雜湊（如 bcrypt 或 Argon2）儲存，嚴禁以明文或簡單加密方式儲存。
* 4.1.2 錯誤登入保護 (AC5)  
    系統必須在短時間內連續失敗嘗試次數達到上限後（例如 5 次），暫時鎖定該帳號或要求額外驗證（如 CAPTCHA），以防暴力破解攻擊。
* 4.1.3 資訊揭露限制  
    無論登入成功或失敗，系統的回應訊息均不得揭露伺服器版本、系統架構或任何有助於攻擊的內部錯誤資訊。錯誤訊息應統一且模糊（例如：「學號或密碼錯誤」）。
* 4.1.4 Session 安全  
    建立的 Session 或 Token 必須設置合理的過期時間，並採用安全的傳輸機制（如設置 `HttpOnly` 和 `Secure` 屬性的 Cookie）。

### **4.2 效能與回應時間 (Performance & Response Time)**

針對 Story 需求：「登入系統」

* 4.2.1 驗證回應時間  
    從使用者按下登入按鈕到收到驗證結果（成功導向或失敗提示）的時間，在正常負載下不應超過 **1.5 秒**。
* 4.2.2 高併發處理能力  
    系統需能處理在選課高峰期，同時數千名學生在 **5 秒內** 嘗試登入的請求，確保登入服務不會中斷或顯著變慢。

### **4.3 可用性與使用者體驗 (Usability)**

針對 Story 需求：「顯示明確錯誤訊息」

* 4.3.1 表單驗證提示 (AC3)  
    若使用者未填寫必填欄位，前端應即時顯示提示訊息，阻止表單送出，以優化使用者體驗。
* 4.3.2 登入狀態提示 (AC4)  
    登入成功後進入選課頁面時，頁面應清楚顯示使用者的**學號與姓名**等資訊，以確認目前的登入身份。

# **五、專案需求規格說明書：課程瀏覽與高效搜尋系統**

**文件版本：** V1.1  
**文件日期：** 2025/11/29
**專案作者：** 楊立安

----

## 1. 系統說明 (System Description)

### 1.1 系統目的與目標
* **目的：** 本系統旨在解決學生在大量開課資訊中，難以高效篩選和定位所需課程的問題。
* **目標：** 透過建立課程瀏覽與搜尋功能，達成以下目標：
    1.  [目標 1：] 讓學生能高效地找到並瀏覽所有開課資訊。
    2.  [目標 2：] 提供多維度的搜尋和排序功能，大幅提升課程資訊的檢索效率。

### 1.2 系統範圍
本專案將涵蓋：
* **課程資訊的介面展示**（列表或卡片頁面）。
* **多條件的搜尋邏輯**（關鍵字、時間區段）。
* **課程屬性篩選功能**（必修/選修）。

但不包括：
* 課程的選課、退選或時間衝突檢查功能（屬於 Story 6 的範圍）。

### 1.3 使用者類型與特徵
| 類型 | 描述 | 主要職責/權限 |
| :--- | :--- | :--- |
| **學生 (Student)** | 系統的主要使用者 | 檢視課程列表、使用搜尋和篩選器找課。 |
| **IT部門** | 系統維護和效能相關利害關係人 | 關注系統在高複雜度查詢下的效率。 |
| **教務處** | 資料準確性相關利害關係人 | 關注課程屬性資料的正確性。 |

---

## 2. 初步系統架構 (High-Level System Architecture)

本系統的搜尋功能主要依賴於應用層的邏輯處理和資料層的結構優化。

### 2.1 系統元件概覽

#### 2.1.1 呈現層 (Presentation Layer)
* **技術：** [請填寫，例如：React / Vue.js]
* **職責：** 規劃列表或卡片頁面，提供萬用搜尋欄 和單選/複選框篩選器。

#### 2.1.2 應用/邏輯層 (Application/Logic Layer)
* **技術：** [請填寫，例如：Node.js / Python]
* **職責：** 實作模糊比對邏輯（針對課程名稱/老師姓名）；處理多條件（週幾、節次範圍、必選修）的複雜組合查詢。

#### 2.1.3 資料層 (Data Layer)
* **技術：** [請填寫，例如：MySQL / PostgreSQL]
* **職責：** 確保 **Course Table** 中課程資訊（名稱、老師、時間、地點、名額、必修/選修標籤、**學分**）完整且正確。並針對搜尋欄位建立索引以提高效率。

---

## 3. 功能需求 (Functional Requirements)

功能需求定義了系統在課程瀏覽與搜尋方面**必須提供的功能**。

### 3.1 課程列表與排序 (Task 1)
| ID | 描述 (功能) | 優先級 (高/中/低) | 需求來源 |
| :--- | :--- | :--- | :--- |
| FR-S5.1 | **課程資訊檢視** | 高 | 檢視課程列表 (課程名稱、老師、時間、地點、名額、**學分**)。 <--- **此處已更改** |
| FR-S5.2 | **基礎排序** | 高 | 實作點擊標題欄排序的功能，例如按課程名稱、時間或老師排序。 |

### 3.2 課程搜尋與篩選 (Task 2 & 3)
| ID | 描述 (功能) | 優先級 (高/中/低) | 需求來源 |
| :--- | :--- | :--- | :--- |
| FR-S5.3 | **關鍵字模糊搜尋** | 高 | 在介面頂部設置萬用搜尋欄，後端實作模糊比對邏輯（針對課程名稱和老師姓名）。 |
| FR-S5.4 | **時間區段搜尋** | 高 | 設置專門的選擇器，讓使用者能指定週幾和特定節次範圍來篩選課程。 |
| FR-S5.5 | **屬性篩選器** | 高 | 頁面側邊或上方提供單選/複選框篩選器，讓使用者快速切換只查看必修或選修課程。 |

---

## 4. 非功能需求 (Non-Functional Requirements)

非功能需求定義了系統在搜尋功能上的品質屬性。

### 4.1 效能需求 (Performance)
* **搜尋效率：** 執行複雜搜尋（例如：老師=李教授&時間=週三&屬性=選修）時，系統必須在可接受的時間內顯示結果。
* **響應時間：** [建議填寫：例如，90% 的搜尋結果必須在 1.5 秒內返回。]

### 4.2 準確性需求 (Accuracy)
* **屬性檢查：** 系統必須確保篩選「必修」或「選修」課程時，隨機選取的課程屬性與資料庫中該課程的屬性一致。

### 4.3 可用性需求 (Usability)
* **介面設計：** 頁面應採用列表或卡片設計，清晰展示所有必備資訊。
* **資料標籤：** 每門課程資料中都必須有「必修/選修」的明確標籤。

# **六、專案需求規格說明書：選課登記與衝突避免系統**

**文件版本：** V1.2  
**文件日期：** 2025/11/29
**專案作者：** 楊立安

---

## 1. 系統說明 (System Description)

### 1.1 系統目的與目標
* **目的：** 本系統旨在解決學生在選課過程中可能遇到的名額衝突、時間衝突和選課資格不符等問題，確保選課流程的順利和資料的準確性。
* **目標：** 透過建立選課登記功能，達成以下目標：
    1.  [目標 1：] 確保學生能順利、準確地將課程加入個人課表。
    2.  [目標 2：] 系統能自動檢查並有效防止選課的時間衝突和學分上限超額。

### 1.2 系統範圍
本專案將涵蓋：
* **選課/退選** 的介面動作與後端交易邏輯。
* **選課名額** 的即時檢查與更新。
* **多條件的選課資格檢查**（包含時間衝突、先修條件、學分上限）。

但不包括：
* 課程資料的建立與修改（屬於教務處管理範圍）。

### 1.3 使用者類型與特徵
| 類型 | 描述 | 主要職責/權限 |
| :--- | :--- | :--- |
| **學生 (Student)** | 系統的主要使用者 | 點選課程進行選課登記或取消已選課程。 |
| **授課老師 (Instructor)** | 關注選課名單準確性 | 登入系統查看其課程的選課名單。 |
| **教務處/系所** | 關注選課規則和限制 | 關注選課屬性、先修條件、學分上限的控制。 |

---

## 2. 初步系統架構 (High-Level System Architecture)

本系統的核心在於**交易處理 (Transaction Processing)** 和**衝突檢查邏輯 (Conflict Logic)**，以保證數據一致性。

### 2.1 系統元件概覽

#### 2.1.1 呈現層 (Presentation Layer)
* **技術：** [請填寫]
* **職責：** 在課程列表和「我的課表」頁面提供清晰且易於點擊的「選課」/「退選」按鈕。

#### 2.1.2 應用/邏輯層 (Application/Logic Layer)
* **技術：** [請填寫]
* **職責：** 執行所有業務邏輯：時間衝突判斷；選課資格檢查（包含學分上限）；將資料儲存與名額處理納入單一資料庫交易 (Transaction)。

#### 2.1.3 資料層 (Data Layer)
* **技術：** [請填寫]
* **職責：** 選課紀錄表儲存學生 ID 與課程 ID；課程資料表需支援剩餘名額的即時更新。

---

## 3. 功能需求 (Functional Requirements)

功能需求定義了系統在選課流程中**必須提供的功能**。

### 3.1 選課登記流程 (Task 1 & 3)
| ID | 描述 (功能) | 優先級 (高/中/低) | 需求來源 |
| :--- | :--- | :--- | :--- |
| FR-S6.1 | **選課按鈕介面** | 高 | 在每門課程旁設置一個清晰且易於點擊的「選課」按鈕。 |
| FR-S6.2 | **選課前置檢查** | 高 | 按鈕點擊後，後端需立即檢查：課程是否額滿、學生是否符合選課資格（例如年級限制、**學分上限**、先修條件）。 <-- **已強調學分上限** |
| FR-S6.3 | **選課資料寫入** | 高 | 通過所有檢查後，將新的「學生 ID + 課程 ID」紀錄寫入選課紀錄表。 |
| FR-S6.4 | **名額立即減 1** | 高 | 成功寫入紀錄後，立即將該課程的剩餘名額減 1。 |
| FR-S6.5 | **結果確認與導向** | 高 | 顯示「選課成功」訊息，並將學生導向或刷新「我的課表」頁面。 |

### 3.2 時間衝突檢查與處理 (Task 2)
| ID | 描述 (功能) | 優先級 (高/中/低) | 需求來源 |
| :--- | :--- | :--- | :--- |
| FR-S6.6 | **既有課表取出** | 高 | 在執行選課儲存動作前，系統必須取出學生既有課表的所有課程時間。 |
| FR-S6.7 | **衝突判斷** | 高 | 將新選課程的上課時間與既有課表中的每門課時間進行重疊比對。 |
| FR-S6.8 | **衝突中止與提示** | 高 | 如果發現任何重疊，立即中止選課，並向學生顯示明確的錯誤訊息（指出衝突的課程名稱和時間）。 |

---

## 4. 非功能需求 (Non-Functional Requirements)

### 4.1 效能需求 (Performance)
* **高併發控制：** 系統必須能在高併發測試下，正確執行名額上限限制，保證名額不會超賣。

### 4.2 準確性與可靠性 (Accuracy & Reliability)
* **資料一致性：** 選課/退選過程中，「選課紀錄表」的變動與「課程資料表」的名額更新必須是原子操作。
* **選課名單準確性：** 授課老師在系統中查看的選課名單人數，必須與資料庫中的實際登記人數完全一致。

# **七、專案需求規格說明書：查看課表與匯出課表**

**文件版本：** V1.0
**文件日期：** 2025/12/06  
**專案作者：** 陳暐仁, B1243013

---

## **1. 系統說明 (System Description)**

### **1.1 系統目的與目標**

本模組旨在提供學生一個清晰、直觀的課表查看介面，解決學生難以快速確認選課狀況的問題。透過視覺化的週課表展示，學生能夠一目了然地掌握所有已選課程的時間安排、教室位置及授課教師等資訊，並可將課表匯出保存或列印，方便進行課程規劃與時間管理。

### **1.2 系統範圍**

本系統範圍涵蓋「學生課表查看與匯出」相關功能，包括：

- 以週為單位顯示所有已選課程的完整課表
- 呈現課程的詳細資訊（課程名稱、教師、教室、時間等）
- 提供課表匯出為 PDF 或圖片格式的功能
- 支援課表列印功能

### **1.3 使用者類型與特徵**

- **學生 (Student):** 主要使用者。希望能快速查看自己的課表安排，確認選課狀況，並能方便地保存或分享課表。
- **系統管理員 (Admin):** 負責維護課程基本資料與選課紀錄，確保課表資訊的正確性與即時性。

---

## **2. 初步系統架構 (High-Level System Architecture)**

### **2.1 系統元件概覽**

#### **2.1.1 呈現層 (Presentation Layer)**

- **Web 前端介面:** 提供學生使用的「我的課表」展示頁面
- **互動元件:** 包含週課表網格、課程詳細資訊彈窗、匯出格式選擇按鈕、列印預覽功能
- **技術支援:** 需相容於 Chrome, Edge, Firefox, Safari 等主流瀏覽器，並支援響應式設計以適配行動裝置

#### **2.1.2 應用/邏輯層 (Application/Logic Layer)**

- **課表查詢服務 (Schedule Query Service):** 核心邏輯元件。負責根據學生身份查詢選課紀錄，整合課程資訊，並組織成週課表格式
- **匯出生成模組 (Export Generator):** 處理課表轉換為 PDF 或圖片格式的邏輯，包含排版優化與檔案命名
- **權限控制模組:** 驗證身份以確保學生僅能查看自己的課表資料
- **業務邏輯:** 處理「課程時段計算」、「衝堂檢測」、「學期切換」等規則

#### **2.1.3 資料層 (Data Layer)**

- **資料庫 (Database):** 儲存學生選課紀錄、課程資訊（課程名稱、代碼、學分）、教師資訊、教室資訊、上課時間等資料
- **備份機制:** 執行定期自動備份，確保選課資料不遺失

---

## **3. 功能需求 (Functional Requirements)**

本章節詳述系統應具備的功能邏輯與使用者故事。

### **3.1 使用者故事 (User Story)**

**故事標題:** 學生課表查看與確認

- **身為 (As a):** 一位學生
- **我希望 (I want to):** 能夠清楚查看我的最終課表
- **以便 (So that):** 我可以確認選課狀況，掌握每週的課程安排，並方便進行時間規劃

#### **驗收標準 (Acceptance Criteria)**

- **AC1:** 系統必須以週為單位清楚顯示所有已選課程的時間安排
- **AC2:** 課表中必須包含課程名稱、授課教師、教室位置、上課時間等完整資訊
- **AC3:** 系統必須提供課表匯出功能，支援 PDF 與圖片格式
- **AC4:** 匯出的課表內容必須完整、清晰、適合列印
- **AC5:** 學生應能透過列印功能直接列印課表

### **3.2 任務功能描述 (Task Descriptions)**

#### **任務 1：顯示所有已選課程的課表（以週為單位）**

- **功能描述:** 開發課表展示介面，以時間軸（週一至週日）與時段（如 08:00-09:00）的網格形式呈現學生所有已選課程。系統需自動計算每門課程的上課時段並正確放置於課表網格中。當同一時段有多門課程時（衝堂），應以視覺方式明確標示。
- **負責人:** [您的姓名]
- **產出:** 週課表展示頁面

#### **任務 2：課表顯示課程名稱、老師、教室、時間等資訊**

- **功能描述:** 開發課程資訊顯示功能，確保課表網格中的每一門課程都能清楚呈現以下資訊：

  - 課程名稱（含課程代碼）
  - 授課教師姓名
  - 上課教室（建築物名稱 + 教室編號）
  - 上課時間（星期、起訖時間）
  - 學分數

  資訊應以美觀、易讀的方式排版。點擊課程時，可展開彈窗顯示更詳細資訊（如課程大綱、評分方式等）。

- **負責人:** [您的姓名]
- **產出:** 課程詳細資訊顯示元件

#### **任務 3：匯出或列印課表（PDF 或圖片）**

- **功能描述:** 開發課表匯出與列印功能，提供以下選項：

  - **PDF 匯出：** 將課表轉換為 PDF 文件，針對 A4 紙張優化排版，適合保存與分享
  - **圖片匯出：** 將課表轉換為 PNG 或 JPG 圖片，解析度需清晰可讀，適合插入文件或社群分享
  - **列印功能：** 調用瀏覽器的列印對話框，提供列印預覽，確保列印結果符合預期

  匯出檔案的命名格式應為：`課表_學期_學生姓名_日期.pdf` 或 `.png`

- **負責人:** [您的姓名]
- **產出:** 課表匯出與列印功能模組

---

## **4. 非功能需求 (Non-Functional Requirements)**

本章節針對「學生課表查看」Story 的特性，定義必要的系統品質與限制。

### **4.1 效能與回應時間 (Performance & Response Time)**

針對 Story 需求：「清楚查看課表」、「匯出課表」

- **4.1.1 課表載入速度**  
  當學生進入課表頁面時，系統需在 **2 秒內**完成課表資料的查詢與渲染，確保使用者能快速看到完整課表，避免長時間等待。
- **4.1.2 匯出處理效率**  
  當學生觸發「匯出 PDF」或「匯出圖片」功能時，系統需在 **5 秒內**完成格式轉換並提供下載連結，確保匯出流程順暢。

### **4.2 可用性與使用者體驗 (Usability)**

針對 Story 需求：「確認選課狀況」、「清楚查看課表」

- **4.2.1 介面直觀性**  
  課表介面應設計直觀，新使用者無需教學即可理解課表內容並完成匯出或列印操作。所有互動元件（如匯出按鈕、列印按鈕）應位於明顯位置。
- **4.2.2 響應式設計**  
  課表網格必須支援響應式設計，能適配桌面電腦、平板與手機螢幕，確保不同裝置上都能清晰呈現課程資訊。
- **4.2.3 視覺化提示**  
  若存在衝堂情況，系統必須以醒目的顏色或圖示標示，並在滑鼠懸停時顯示具體的衝堂課程資訊。空堂時段應以不同顏色或樣式區分，方便學生快速識別。

### **4.3 相容性 (Compatibility)**

針對 Story 需求：「匯出或列印課表」

- **4.3.1 瀏覽器相容性**  
  前端介面必須支援主流瀏覽器的最新兩個版本，包括 Chrome, Firefox, Safari, Edge，確保功能在不同瀏覽器中正常運作。
- **4.3.2 匯出格式相容性**  
  匯出的 PDF 文件必須相容於主流 PDF 閱讀器（如 Adobe Acrobat Reader, 瀏覽器內建 PDF 檢視器），圖片格式應為通用的 PNG 或 JPG。
- **4.3.3 行動裝置支援**  
  手機版介面應相容於 iOS 與 Android 系統，確保學生可在行動裝置上順利查看與匯出課表。

### **4.4 安全性與授權 (Security & Authorization)**

針對 Story 需求：「我的課表」

- **4.4.1 資源存取控制 (Resource Access Control)**  
  系統需實作嚴格的身份驗證與權限檢查，確保學生僅能查看自己的課表資料，無法存取其他學生的選課資訊。
- **4.4.2 資料隱私保護**  
  匯出的課表檔案不應包含敏感個人資訊（如完整學號、身分證字號），僅顯示必要的識別資訊（如姓名、簡化學號）。

### **4.5 可靠性與資料一致性 (Reliability & Data Consistency)**

針對 Story 需求：「確認選課狀況」

- **4.5.1 資料即時性**  
  課表顯示的資料必須與選課系統保持同步。當學生進行加退選操作後，課表應在 **10 分鐘內**自動更新，反映最新的選課狀況。
- **4.5.2 系統可用性**  
  系統可用性應達到 **99% 以上**（每月停機時間不超過 7.2 小時），確保學生能隨時查看課表。
- **4.5.3 資料備份**  
  選課與課程資料應每日自動備份，確保即使發生系統故障，學生的課表資料也不會遺失。

### **4.6 可維護性 (Maintainability)**

針對系統長期維護需求

- **4.6.1 模組化設計**  
  程式碼應遵循模組化設計原則，將課表查詢、匯出生成、UI 呈現等功能分離，便於未來擴充新功能（如課表分享、行事曆整合）。
- **4.6.2 操作日誌**  
  系統應記錄學生的課表查詢與匯出操作日誌，包含時間戳記與操作類型，方便問題追蹤與系統優化。
- **4.6.3 彈性適應**  
  當課程資料格式發生變更時（如新增欄位、修改時段規則），系統應能彈性適應而無需大幅修改核心邏輯。

# **八、專案需求規格說明書：排課管理與衝突偵測系統**

**文件版本：** V1.1
**文件日期：** 2025/12/08  
**專案作者：** 蔡昀辰,b1243037

---

## **1. 系統說明 (System Description)**

### **1.1 系統目的與目標**

本系統旨在作為教務行政人員的核心排課管理工具，協助行政人員完成複雜的課程排程規劃，並方便進行時間衝突調解，並集中管理與設定選課時程及相關規則。
目標： 確保排課結果的零衝突、資源利用最佳化，並提高行政人員在處理排程任務時的效率與準確性。

### **1.2 系統範圍**

本專案將專注於教務行政人員的管理與配置功能，核心涵蓋以下功能模組：

* **課程與教室使用時間表展示**（時間列表）。
* **高效查詢工具**（教室、時間區段）。
* **課程衝突標註**（資料接收/調解提示生成）。
* **課程時間與規則設定**（起訖時間）。

### **1.3 使用者類型與特徵**

- **教務行政人員 (Admin):** 核心使用者。需具備排課流程知識，負責查閱、篩選、調整排課；設定選課規則；解決衝突。
- **學生 (Student) :** 間接使用者，在非選課時間嘗試操作時，需接收系統提示。。

---

## **2. 初步系統架構 (High-Level System Architecture)**

### **2.1 系統元件概覽**

#### **2.1.1 呈現層 (Presentation Layer)**

- **Web 前端介面:** 提供管理員使用的排課儀表板和排程網格介面
- **互動元件:** 包含多條件篩選器、課程與教室時間網格、衝突警示標示、規則設定表單。
- **技術支援:** 需支援主流瀏覽器。

#### **2.1.2 應用/邏輯層 (Application/Logic Layer)**

- **排程調解與規則引擎 (Schedule Resolution & Rule Engine):**  系統核心決策元件。負責接收並處理由其他模組提供的衝突資訊，並提供數據支持給呈現層，用以生成調解建議或替代方案。
- **規則設定服務 :** 處理選課時間和階段規則的儲存與應用。
- **權限控制模組:** 驗證身份以確保只有教務行政人員可以進行修改操作。

#### **2.1.3 資料層 (Data Layer)**

- **資料庫 (Database):** 儲存課程排程、教師排程限制、教室佔用紀錄、選課規則配置。
- **備份機制:** 對排課數據執行定時備份，確保排程結果不遺失。


---

## **3. 功能需求 (Functional Requirements)**

本章節詳述系統應具備的功能邏輯與使用者故事。

### **3.1 使用者故事 (User Story)**

**故事標題:** 教務行政管理與排程維護

- **身為 (As a):** 教務行政人員
- **我希望 (I want to):** 能夠管理所有開課資訊與調解教室排程衝突
- **以便 (So that):** 我可以保持校內課程與資源使用的秩序

#### **驗收標準 (Acceptance Criteria)**

- **AC1:** 管理員必須能透過多條件篩選，準確查閱所有課程與教室的使用情況。
- **AC2:** 系統必須在排程調整時，即時標示並提示教室/時間衝突。
- **AC3:** 管理員必須能靈活設定選課的起始截止時間和分階段規則。

### **3.2 任務功能描述 (Task Descriptions)**

#### **任務 1：查閱所有課程與教室使用狀況**

- **功能描述:** 開發管理員介面，允許查看所有已開設課程的詳細列表和所有教室的時段佔用表。

- **負責人:** 蔡昀辰
- **產出:** 管理員查詢儀表板

#### **任務 2：課程排程衝突調解與資源重分配**

- **功能描述:** 開發排程調解介面，允許管理員對課程的時間、教室或教師進行調整。系統利用外部衝突警示，顯示已存在的衝突，並提供調解建議或空閒資源替代方案，輔助管理員高效完成衝突解決與排程更新。

- **負責人:** 蔡昀辰
- **產出:** 課程排程修改與衝突偵測模組

#### **任務 3：管理選課時間與選課規則設定**

- **功能描述:** 開發規則配置介面，使管理員能夠設定選課流程的開放時間和學生資格限制。

- **負責人:** 蔡昀辰
- **產出:** 選課規則設定頁面

---

## **4. 非功能需求 (Non-Functional Requirements)**

### **4.1 效能與回應時間 (Performance & Response Time)**

- **4.1.1 衝突偵測效率**  
  當管理員調整排程時，系統需在 1.5 秒內完成所有相關的規則檢核與調解方案計算，並將結果傳遞給介面顯示。
- **4.1.2 查詢載入速度**  
  管理員查詢所有課程列表（包含多條件篩選）時，頁面需在 3 秒內載入。


### **4.2 可用性與使用者體驗 (Usability)**

- **4.2.1 介面直觀性**  
  排課介面應設計直觀，需清晰呈現外部模組提供的衝突標示，並突出顯示系統生成的調解建議或替代方案。
- **4.2.2 篩選功能**  
  篩選功能應易於操作，支持多重條件疊加。


### **4.3 相容性 (Compatibility)**

- **4.3.1 瀏覽器相容性**  
  管理員介面必須支援主流瀏覽器最新兩個版本。


### **4.4 安全性與授權 (Security & Authorization)**

- **4.4.1 資源存取控制**  
  系統需實作嚴格的權限檢查，確保只有被授權的教務行政人員可以執行排程和規則設定的寫入操作。
- **4.4.2 操作日誌**  
  系統必須記錄管理員對排程數據的所有修改日誌（誰、何時、修改了什麼）。


### **4.5 可靠性與資料一致性 (Reliability & Data Consistency)**

- **4.5.1 交易完整性**  
  排程修改（更新課程主表和教室佔用表）必須是原子操作 (Atomic Operation)，確保數據一致性。
- **4.5.2 衝突強制限制**  
  系統應禁止將任何帶有未解決衝突的排課發佈給學生使用。

### **4.6 可維護性 (Maintainability)**
- **4.6.1 模組化設計**  
  程式碼應將排程衝突邏輯與資料維護功能分離，便於未來擴充新的衝突規則。

