# **選課系統需求規格書：教室自動化排程**

**文件版本：** V1.0
**文件日期：** 2025/12/04
**專案作者：** 凌彣碩, B1243003

## **1\. 系統說明 (System Description)**

### **1.1 系統目的與目標**

本模組旨在解決傳統人工排課耗時且易出錯的問題。透過自動化演算法，系統將協助教師與行政人員快速完成教室分配，確保資源利用最佳化，並減少排課衝突。

### **1.2 系統範圍**

本系統範圍涵蓋「教室自動化排程」相關功能，包括：

* 依據課程人數與時間自動匹配教室。  
* 偵測並防止排課時間與地點衝突。  
* 提供教師檢視與手動調整排課結果的介面。

### **1.3 使用者類型與特徵**

* **教師 (Teacher):** 主要使用者。希望系統能自動處理繁瑣的教室申請，同時保留調整彈性。  
* **系統管理員 (Admin):** 負責維護教室基本資料（如容量、地點）供系統使用。

## **2\. 初步系統架構 (High-Level System Architecture)**

### **2.1 系統元件概覽**

#### **2.1.1 呈現層 (Presentation Layer)**

* **Web 前端介面:** 提供教師使用的「我的課表」儀表板。  
* **互動元件:** 包含排課結果清單、衝突警示彈窗、以及手動更換教室的下拉式選單與確認視窗。  
* **技術支援:** 需相容於 Chrome, Edge, Firefox, Safari 等主流瀏覽器。

#### **2.1.2 應用/邏輯層 (Application/Logic Layer)**

* **排程演算法引擎 (Scheduling Engine):** 核心邏輯元件。負責接收課程需求，遍歷可用教室，並執行衝突檢測 (Collision Detection)。  
* **權限控制模組:** 驗證 Token 以確保只有授權教師能修改自己的課程教室。  
* **業務邏輯:** 處理「檢查容量」、「檢查時間重疊」、「鎖定教室」等規則。

#### **2.1.3 資料層 (Data Layer)**

* **資料庫 (Database):** 儲存課程資訊、教室資訊（ID、容量、地點）、以及排課關聯表。  
* **備份機制:** 執行定期自動備份，支援災難復原。

## **3\. 功能需求 (Functional Requirements)**

本章節詳述系統應具備的功能邏輯與使用者故事。

### **3.1 使用者故事 (User Story)**

**故事標題:** 教室自動化排程

* **身為 (As a):** 一位老師  
* **我希望 (I want to):** 系統能自動為我的課程安排一間合適且不會與其他課程衝突的教室  
* **以便 (So that):** 我可以專注於課程準備，而無需手動協調教室，並確保教室符合課程需求。

#### **驗收標準 (Acceptance Criteria)**

* **AC1:** 系統必須能檢查並避免與其他已排定課程的時間重疊。  
* **AC2:** 系統必須考量教室的容納人數，確保其大於或等於課程的修課人數上限。  
* **AC3:** 系統必須防止同一間教室在同一時間被重複預訂。  
* **AC4:** 教師應該能在系統中清楚看到其課程被安排在哪一間教室。  
* **AC5:** 當系統自動安排的教室不符合特殊需求時，教師應有手動更換教室的選項。

### **3.2 任務功能描述 (Task Descriptions)**

#### **任務 1：實作教室自動排程演算法**

* **功能描述:** 開發後端邏輯，根據課程的**上課時間**與**預計修課人數**，自動從可用教室列表中篩選並指派教室。需有效避免衝突與容量不足。  
* **負責人:** 凌彣碩  
* **產出:** 自動排程 API 功能。

#### **任務 2：顯示已分配的教室與課程時間**

* **功能描述:** 開發一個使用者介面(UI)，讓教師登入後能清楚看到自己所有課程的排程結果，包含課程名稱、上課時間、已分配的教室名稱/編號，以及教室的容量資訊。  
* **負責人:** 凌彣碩  
* **產出:** 「我的課表」頁面。

#### **任務 3：開發手動修改教室排程功能**

* **功能描述:** 提供一個介面，允許教師手動修改由系統分配的教室。教師點擊修改後，系統應顯示出在**同一時段**所有其他**可用的**、且**容量足夠的**教室列表供教師選擇。教師確認更換後，系統需更新排程資料。  
* **負責人:** 凌彣碩  
* **產出:** 更換教室功能視窗。

## **4\. 非功能需求 (Non-Functional Requirements)**

本章節針對「教室自動排程」Story 的特性，定義必要的系統品質與限制。

### **4.1 資料一致性與完整性 (Data Consistency & Integrity)**

針對 Story 需求：「避免與其他課程時間衝突」

* 4.1.1 交易原子性 (Transactional Atomicity)  
  排程系統必須保證資料庫操作的原子性。當多位教師同時嘗試預訂同一間教室時，系統只能允許一筆交易成功，嚴格禁止雙重預訂 (Double Booking) 的情況發生。  
* 4.1.2 即時狀態同步  
  當某一教室被分配或鎖定後，其狀態必須在 1 秒內 同步更新至所有使用者的查詢清單中，避免教師看到已過期的「可用」資訊。

### **4.2 效能與回應時間 (Performance & Response Time)**

針對 Story 需求：「自動安排」、「修改教室」

* 4.2.1 演算法運算效率  
  當教師觸發「自動排程」功能時，系統需在 3 秒內 完成衝突檢測並回傳建議的教室結果，避免使用者長時間等待。  
* 4.2.2 列表載入速度  
  在執行「更換教室」功能時，系統篩選並顯示可用教室列表的時間不得超過 1 秒。

### **4.3 安全性與授權 (Security & Authorization)**

針對 Story 需求：「我的課程」

* 4.3.1 資源存取控制 (Resource Access Control)  
  系統需實作嚴格的權限檢查，確保教師僅能修改自己所授課程的教室安排，無法變更其他教師的排課結果。  
* 4.3.2 操作稽核 (Audit Trail)  
  所有教室分配的變更（包含自動排程與手動修改）均需記錄操作者 ID、時間戳記與變更前後的教室編號，以供日後衝突爭議時查詢。

### **4.4 可用性與使用者體驗 (Usability)**

針對 Story 需求：「確認排課狀況」、「修改教室排程」

* 4.4.1 衝突視覺化  
  若系統無法自動安排教室，必須提供具體的錯誤代碼或訊息（例如：「該時段無足夠容量的教室」），而非僅顯示一般性錯誤。  
* 4.4.2 狀態提示  
  在手動更換教室的介面中，不可用的教室應以視覺方式（如反灰或鎖頭圖示）呈現，並在滑鼠懸停時顯示不可用的原因（如：「已由課程 A 預訂」）。
