# **S4-選課系統測試文件：登入系統身分驗證**

**文件版本：** V1.0
**文件日期：** 2025/12/07
**專案作者：** 施穎禾, B1243021

## **1\. 進入條件 (Preconditions)**

在執行測試案例之前，必須滿足以下條件：

1.  **測試環境建置:** 系統程式碼已部署至測試伺服器，且資料庫中已存在至少一個測試用的**已註冊學生帳號**（例如：學號 S12345678，密碼 CorrectPass!23）。
2.  **登入頁面可存取:** 登入頁面 (`/login`) 可正常載入，且後端身份驗證服務可用。
3.  **選課頁面預備:** 存在 `/course-selection` 頁面，用於驗證成功導向。

## **2\. 測試方法 (Test Procedure)**

本測試採用黑箱測試 (Black-box Testing) 與部分白箱驗證 (White-box Verification, 針對日誌/資料庫) 結合的方法。

1.  **步驟執行:** 依照測試案例中的「測試步驟」 逐一操作系統。
2.  **結果比對:** 觀察系統回應（HTTP 狀態碼、錯誤訊息） 與畫面導向，比對是否符合「預期結果」。
3.  **後端驗證 (針對安全性/Session):**
    * **Session/Token 驗證:** 確認登入成功後，是否建立了有效的 Session 或 Token。
    * **日誌稽核:** 檢查後端是否記錄了登入成功/失敗的安全日誌。
4.  **缺陷紀錄:** 若實際結果與預期不符，需記錄為 Bug。

## **3\. 測試成功條件 (Success Criteria)**

本次測試活動視為成功的標準如下：

1.  **案例通過率:** 所有定義的測試案例 (Total Test Cases) 通過率需達 **100%**。
2.  **無重大缺陷:** 測試過程中未發現影響核心流程（如無法登入、未經授權訪問）的重大缺陷。
3.  **需求覆蓋:** 測試案例必須覆蓋需求規格書中定義的所有驗收標準 (**AC1 ~ AC5**)。

## **4\. 測試案例 (Test Cases)**

以下測試案例依據功能模組分類，並對應至需求規格書中的驗收標準 (Acceptance Criteria)。

### **4.1 針對任務 1：輸入學號與密碼登入選課系統**

| 測試案例 ID | 對應需求 (Req. ID) | 案例描述 | 步驟 (Test Procedure) | 預期結果 (Success Criteria) | 優先度 |
| :---- | :---- | :---- | :---- | :---- | :--- |
| **T1-01** | **AC1, AC2** (核心登入) | **成功登入**：輸入正確學號與正確密碼。 | 1. 開啟登入頁面。 2. 輸入有效學號：S12345678。 3. 輸入正確密碼：CorrectPass!23。 4. 按下「登入」按鈕。 | 系統顯示登入成功，**導向選課頁面**（HTTP 200/302），且建立有效 session 或回傳有效 token。 | **高** |
| **T1-02** | **AC1, AC3** (失敗驗證) | **密碼錯誤**：正確學號與錯誤密碼。 | 1. 開啟登入頁面。 2. 輸入有效學號：S12345678。 3. 輸入錯誤密碼：WrongPass。 4. 按下「登入」按鈕。 | 系統顯示**錯誤訊息**（例如：學號或密碼錯誤），停留在登入頁面，HTTP 401 或 403，不建立 session。 | **高** |
| **T1-03** | **AC3** (前端驗證) | **必填欄位檢查**：未填學號或未填密碼。 | 1. 開啟登入頁面。 2. 留空學號或密碼欄位（分別測試）。 3. 按下「登入」按鈕。 | 系統在前端或後端提示**必填欄位錯誤**（例如：請輸入學號／密碼），不送出認證或回傳 HTTP 400 表單錯誤。 | **中** |
| **T1-04** | **AC5** (安全性) | **SQL/注入攻擊輸入**：輸入惡意字串。 | 1. 開啟登入頁面。 2. 在學號欄位輸入惡意字串：' OR '1'='1。 3. 在密碼欄位輸入任意字串，按下登入。 | 系統能**防範 SQL 注入**或任意注入攻擊，回傳錯誤或驗證失敗且不洩漏系統資訊。 | **高** |
| **T1-05** | **AC5** (安全性) | **帳號鎖定／連續錯誤登入保護**。 | 1. 連續多次（例如 5 次）以錯誤密碼嘗試登入相同學號。 2. 第 6 次再嘗試登入時觀察系統行為。 | 系統在達到錯誤次數後**暫時鎖定帳號**或要求驗證（CAPTCHA、二次驗證），並回傳明確訊息。 | **中** |

### **4.2 針對任務 2：身份驗證成功後進入選課頁面**

| 測試案例 ID | 對應需求 (Req. ID) | 案例描述 | 步驟 (Test Procedure) | 預期結果 (Success Criteria) | 優先度 |
| :---- | :---- | :---- | :---- | :---- | :--- |
| **T2-01** | **AC2, AC4** (導向與資料) | **登入成功後正確導向選課頁面與顯示使用者資訊**。 | 1. 完成登入流程並導向選課頁面。 2. 檢查頁面上是否顯示學生姓名、學號與可選課程列表。 3. 嘗試點選一門課程頁面，確認能載入詳細資訊。 | 選課頁面正確載入，**使用者資訊顯示無誤**，且可查看與選取課程。 | **高** |
| **T2-02** | **AC3, AC4** (授權保護) | **未授權存取保護**：使用未驗證或已登出 session 嘗試直接訪問選課頁面。 | 1. 在瀏覽器新分頁直接輸入選課頁面網址 `/course-selection`。 2. 觀察系統回應及導向。 | 系統應將使用者**導向登入頁面**，或顯示需要登入的提示（HTTP 401/302），不允許未授權訪問。 | **高** |
| **T2-03** | **AC4** (持久性) | **Session 或 Token 的持久性**：登入後建立與驗證 session。 | 1. 登入後檢查 cookie 或 token。 2. 關閉瀏覽器再重新開啟 (或等待設定的 session 過期時間前)。 3. 回到選課頁面，確認仍保有登入狀態。 | 系統依設計管理 session，**有效期間內維持登入**，過期會重新導向登入頁面。 | **中** |
| **T2-04** | **NFR 4.3.2** (稽核) | **登入成功後應記錄安全日誌**。 | 1. 完成一次成功登入。 2. 系統管理員或測試人員檢查後端日誌或安全記錄。 | 後端應記錄**登入時間、學號、來源 IP**（如可用）以及登入結果，供安全稽核使用。 | **低** |